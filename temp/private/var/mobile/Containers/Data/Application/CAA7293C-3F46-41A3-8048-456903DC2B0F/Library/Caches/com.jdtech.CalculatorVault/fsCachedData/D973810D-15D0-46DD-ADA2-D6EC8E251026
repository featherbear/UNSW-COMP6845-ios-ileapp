(function(window,document){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
function l(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function m(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:l(a)}}function n(a){if(!(a instanceof Array)){a=m(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},q="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function ba(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var r=ba(this);function t(a,b){if(b)a:{var c=r;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&q(c,a,{configurable:!0,writable:!0,value:b})}}var u;if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var v;a:{var ca={a:!0},w={};try{w.__proto__=ca;v=w.a;break a}catch(a){}v=!1}u=v?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var x=u;function y(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(x)x(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.F=b.prototype}function z(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b}t("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.g=f;q(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.g};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});t("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=r[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&q(d.prototype,a,{configurable:!0,writable:!0,value:function(){return da(l(this))}})}return a});function da(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function ea(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}t("Array.prototype.keys",function(a){return a?a:function(){return ea(this,function(b){return b})}});function A(a,b){if(!b)throw Error("Value for "+a+" is undefined, null or blank.");if("string"!==typeof b&&!(b instanceof String))throw Error("Value for "+a+" is not a string.");if(""===b.trim())throw Error("Value for "+a+" is empty string.");}function B(a){if(!a)throw Error("functionToExecute must not be truthy.");}function C(a,b){if(null==b)throw Error(a+" must not be null or undefined.");if("number"!==typeof b||isNaN(b))throw Error("Value for "+a+" is not a number");if(0>b)throw Error(a+" must be a positive number.");};function D(){return/\d+\.\d+\.\d+(-.*)?/.test("1.3.3-google_20200427")}function E(){for(var a=["1","3","3"],b=["1","0","3"],c=0;3>c;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(d>e)break;else if(d<e)return!1}return!0};function F(a,b,c,d){this.h=a;this.method=b;this.version=c;this.g=d}function fa(a){return!!a&&void 0!==a.omid_message_guid&&void 0!==a.omid_message_method&&void 0!==a.omid_message_version&&"string"===typeof a.omid_message_guid&&"string"===typeof a.omid_message_method&&"string"===typeof a.omid_message_version&&(void 0===a.omid_message_args||void 0!==a.omid_message_args)}function ha(a){return new F(a.omid_message_guid,a.omid_message_method,a.omid_message_version,a.omid_message_args)}function ia(a){var b={};b=(b.omid_message_guid=a.h,b.omid_message_method=a.method,b.omid_message_version=a.version,b);void 0!==a.g&&(b.omid_message_args=a.g);return b};function ja(a){this.h=a};function ka(a,b){return a&&(a[b]||(a[b]={}))};function la(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return"y"===a?(b&3|8).toString(16):b.toString(16)})};function ma(){var a=z.apply(0,arguments);na(function(){throw new (Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(n(a))));},function(){return console.error.apply(console,n(a))})}function na(a,b){"undefined"!==typeof jasmine&&jasmine?a():"undefined"!==typeof console&&console&&console.error&&b()};var G=eval("this"),H=function(){if("undefined"!==typeof omidGlobal&&omidGlobal)return omidGlobal;if("undefined"!==typeof global&&global)return global;if("undefined"!==typeof window&&window)return window;if("undefined"!==typeof G&&G)return G;throw Error("Could not determine global object context.");}();function oa(a){try{return a.frames?!!a.frames.omid_v1_present:!1}catch(b){return!1}};function I(a){this.h=a;this.handleExportedMessage=I.prototype.i.bind(this)}y(I,ja);I.prototype.sendMessage=function(a,b){b=void 0===b?this.h:b;if(!b)throw Error("Message destination must be defined at construction time or when sending the message.");b.handleExportedMessage(ia(a),this)};I.prototype.i=function(a,b){fa(a)&&this.g&&this.g(ha(a),b)};function pa(a){return null!=a&&"undefined"!==typeof a.top&&null!=a.top}function ra(a){if(a===H)return!1;try{if("undefined"===typeof a.location.hostname)return!0}catch(b){return!0}return!1};function J(a,b){this.h=b=void 0===b?H:b;var c=this;a.addEventListener("message",function(d){if("object"===typeof d.data){var e=d.data;fa(e)&&d.source&&c.g&&c.g(ha(e),d.source)}})}y(J,ja);J.prototype.sendMessage=function(a,b){b=void 0===b?this.h:b;if(!b)throw Error("Message destination must be defined at construction time or when sending the message.");b.postMessage(ia(a),"*")};var sa=["omid","v1_VerificationServiceCommunication"],ta=["omidVerificationProperties","serviceWindow"];function ua(a,b){return b.reduce(function(c,d){return c&&c[d]},a)};function K(a){if(!a){var b;"undefined"===typeof b&&"undefined"!==typeof window&&window&&(b=window);b=pa(b)?b:H;var c=void 0===c?oa:c;a=[];var d=ua(b,ta);d&&a.push(d);a.push(pa(b)?b.top:H);a:{a=m(a);for(var e=a.next();!e.done;e=a.next()){b:{d=b;e=e.value;var f=c;if(!ra(e))try{var g=ua(e,sa);if(g){var k=new I(g);break b}}catch(h){}k=f(e)?new J(d,e):null}if(d=k){a=d;break a}}a=null}}if(this.g=a)this.g.g=this.o.bind(this);else if(c=(c=H.omid3p)&&"function"===typeof c.registerSessionObserver&&"function"===typeof c.addEventListener?c:null)this.h=c;this.s=0;this.j={};this.l=[];this.m=(c=H.omidVerificationProperties)?c.injectionId:void 0}function va(a){return!(!a.g&&!a.h)}function wa(a,b,c){B(b);a.h?a.h.registerSessionObserver(b,c,a.m):a.i("addSessionListener",b,c,a.m)}function L(a,b,c){A("eventType",b);B(c);a.h?a.h.addEventListener(b,c):a.i("addEventListener",c,b)}function xa(a,b){A("url",b);H.document&&H.document.createElement?ya(a,b):a.i("sendUrl",function(){},b)}function ya(a,b){function c(e){var f=a.l.indexOf(d);0<=f&&a.l.splice(f,1);e&&e()}var d=H.document.createElement("img");a.l.push(d);d.addEventListener("load",c.bind(a,void 0));d.addEventListener("error",c.bind(a,void 0));d.src=b}function za(a,b,c){B(b);C("timeInMillis",c);if(Aa())return H.setTimeout(b,c);var d=a.s++;a.i("setTimeout",b,d,c);return d}function Aa(){return"function"===typeof H.setTimeout&&"function"===typeof H.clearTimeout}K.prototype.o=function(a){var b=a.method,c=a.h;a=a.g;if("response"===b&&this.j[c]){var d=D()&&E()?a?a:[]:a&&"string"===typeof a?JSON.parse(a):[];this.j[c].apply(this,d)}"error"===b&&window.console&&ma(a)};K.prototype.u=function(a){this.i.apply(this,[a,null].concat(n(z.apply(1,arguments))))};K.prototype.i=function(a,b){var c=z.apply(2,arguments);if(this.g){var d=la();b&&(this.j[d]=b);c=D()&&E()?c:JSON.stringify(c);this.g.sendMessage(new F(d,"VerificationService."+a,"1.3.3-google_20200427",c))}};var M=void 0;if(M=void 0===M?"undefined"===typeof omidExports?null:omidExports:M){var N=["OmidVerificationClient"];N.slice(0,N.length-1).reduce(ka,M)[N[N.length-1]]=K};function Ba(a,b){this.g=a;this.h=b}function Ca(a,b){xa(a.g,a.h+b)}function O(a,b,c){b=encodeURIComponent("A problem occurred executing "+c+": "+b.message);Ca(a,"type=omidException&message="+b)};function Da(a,b,c){this.l=a;this.m=b;this.o=c;this.h=null;this.j=this.i=this.g=0}function Ea(a,b,c){3!=a.g&&(a.g=50<=c?2:1,P(a,b))}function P(a,b){if(3!=a.g)if(Fa(a))null==a.h&&Ga(a,b);else if(null!=a.h){b=a.l;var c=a.h;C("timeoutId",c);Aa()?H.clearTimeout(c):b.u("clearTimeout",c);a.h=null}}function Fa(a){return 1==a.i||2==a.i&&3==a.j?2==a.g:!1}function Ha(a){try{Fa(a)&&(a.g=3,a.o()),a.h=null}catch(b){O(a.m,b,"onViewableTimeout_")}}function Ga(a,b){b=(1==a.i?1E3:2E3)-(Date.now()-b);0<b?a.h=za(a.l,function(){return Ha(a)},b):Ha(a)};function Ia(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};var Q={},Ja=(Q.notFound=!0,Q.hidden=!0,Q.backgrounded=!0,Q),R={},Ka=(R.sessionStart=1,R.sessionError=2,R.sessionFinish=4,R.impression=8,R.loaded=16,R.start=32,R.firstQuartile=64,R.midpoint=128,R.thirdQuartile=256,R.complete=512,R.pause=1024,R.resume=2048,R.bufferStart=4096,R.bufferFinish=8192,R.skipped=16384,R.volumeChange=32768,R.playerStateChange=65536,R.adUserInteraction=131072,R.geometryChange=262144,R);function La(){var a=new K,b=S,c=T;this.i=a;this.D=b;this.C=Math.random();this.o=new Ba(this.i,c+"v=15&inst_id="+this.C+"&");this.h=null;this.s={};this.g={};this.u={};a=0;H.IntersectionObserver&&(a|=1);H.MutationObserver&&(a|=2);H.ResizeObserver&&(a|=4);this.B=a;this.m=this.l=null;this.A=!1;this.j=null;this.v=0}La.prototype.start=function(){try{Ma(this)}catch(a){O(this.o,a,"start")}};function Ma(a){if(va(a.i)){U(a,"omidSupported","unknown",null,Date.now(),"Found OMID JS environment");a.l=new Da(a.i,a.o,function(){return Na(a,"omidViewable")});a.m=new Da(a.i,a.o,function(){return Na(a,"omidLegacyViewable")});wa(a.i,V(a,function(d){var e=d.adSessionId,f=d.timestamp,g=d.type,k=d.data;switch(g){case "sessionStart":var h="omidSessionStarted";var p="Session started";try{k.creativeType&&(a.A=!0),k.verificationParameters&&W(a.s,JSON.parse(k.verificationParameters)),a.h=k.context}catch(qa){h="omidException",p=qa.message||qa}break;case "sessionError":h="omidSessionError";p="Session error";break;case "sessionFinish":h="omidSessionFinished";p="Session finished";break;default:h="omidSessonUnknown",p="Unknown session event: "+g}U(a,h,e,g,f,p,d);"sessionFinish"==g&&(a.s={})},"onSessionEvent_"),a.D);L(a.i,"impression",V(a,function(d){var e=d.adSessionId,f=d.timestamp,g=d.type,k=d.data;a.A?a.j||Oa(a,k,g,f,d):X(a,"video"===k.mediaType?2:1);Pa(a,f,k);Y(a,f);U(a,"omidImpression",e,g,f,"Impression event occurred",d)},"onImpressionEvent_"));L(a.i,"geometryChange",V(a,function(d){var e=d.adSessionId,f=d.timestamp,g=d.type,k=Pa(a,f,d.data);U(a,k,e,g,f,"Geometry change event occurred",d)},"onGeometryChangeEvent_"));L(a.i,"loaded",V(a,function(d){if(a.A){var e=d.adSessionId,f=d.timestamp,g=d.type,k=d.data;Oa(a,k,g,f,d);switch(k.creativeType){case "htmlDisplay":case "nativeDisplay":Y(a,f);U(a,"omidLoaded",e,g,f,"Loaded event occurred",d);break;case "video":case "audio":Z(a,d)}}else Z(a,d)},"onLoadedEvent_"));for(var b=m("start firstQuartile midpoint thirdQuartile complete pause resume bufferStart bufferFinish skipped volumeChange playerStateChange adUserInteraction".split(" ")),c=b.next();!c.done;c=b.next())c=c.value,L(a.i,c,V(a,function(d){return Z(a,d)},"onVideoOrAudioEvent_("+c+")"));W(a.s,Qa())}else U(a,"omidUnsupported","unknown",null,Date.now(),"No OMID JS environment")}function Na(a,b){U(a,b,"unknown",null,Date.now(),"A viewable event occurred.")}function Y(a,b){P(a.l,b);P(a.m,b)}function X(a,b){a.l.i=b;a.m.i=b}function W(a,b){null!=b&&Object.keys(b).forEach(function(c){b.hasOwnProperty(c)&&(a[c]=b[c])})}function U(a,b,c,d,e,f,g){e=(new Date(e)).toISOString();var k=(new Date(Date.now())).toISOString(),h={session_id:c,type:b,time:e,mtime:k};W(h,a.s);null!=d&&(h.event=d);"omidSessionStarted"===b&&a.h&&(W(h,a.h.omidJsInfo),W(h,a.h.app),a.h.adSessionType&&(h.adSessionType=a.h.adSessionType),a.h.environment&&(h.environment=a.h.environment),a.h.deviceInfo&&a.h.deviceInfo.os&&(h.os=a.h.deviceInfo.os));"omidMeasurementAbove"!==b&&"omidMeasurementBelow"!==b&&"omidImpression"!==b||W(h,a.g);"start"!==d&&"volumeChange"!==d||W(h,a.u);g&&g.data&&(c=g.data,"omidSessionError"===b?W(h,c):"omidException"===b?(h.message=f,h.event=JSON.stringify(g)):(c.creativeType&&(h.creativeType=c.creativeType),c.mediaType&&(h.mediaType=c.mediaType)));d&&Ka[d]&&(a.v|=Ka[d],h.oeb=a.v);a.h&&(a.h.omidJsInfo&&a.h.omidJsInfo.partnerName?h.partnerName=a.h.omidJsInfo.partnerName:a.h.omidNativeInfo&&a.h.omidNativeInfo.partnerName&&(h.partnerName=a.h.omidNativeInfo.partnerName));b=Object.keys(h).map(function(p){return p+"="+encodeURIComponent(h[p])}).join("&");Ca(a.o,b)}function Oa(a,b,c,d,e){var f=e.adSessionId;b=b.creativeType;if(!b)U(a,"omidException",f,c,d,"creativeType undefined",e);else if("definedByJavaScript"===b)U(a,"omidException",f,c,d,"creativeType DEFINED_BY_JAVASCRIPT",e);else if(!a.j)a.j=b;else if(a.j!==b){U(a,"omidException",f,c,d,"creativeType changed from ${this.creativeType_} to ${creativeType}",e);return}switch(b){case "htmlDisplay":case "nativeDisplay":X(a,1);break;case "video":X(a,2);break;case "audio":X(a,3)}}function Pa(a,b,c){var d="omidMeasurementUnknown",e=c.viewport;e&&(a.g.vw=e.width,a.g.vh=e.height);if(e=c.adView){d=e.percentageInView;a.g.piv=d;(c=e.reasons)&&(a.g.rs=c.join(","));var f=e.geometry;if(f){a.g.ax=f.x;a.g.ay=f.y;a.g.aw=f.width;a.g.ah=f.height;var g=f.width*f.height}if(f=e.onScreenGeometry){a.g.ox=f.x;a.g.oy=f.y;a.g.ow=f.width;a.g.oh=f.height;var k=f.width*f.height;f=f.obstructions;a.g.nobs=f?f.length:0}e.measuringElement&&(a.g.cm=1,a.g.ba=a.B,e=e.containerGeometry)&&(a.g.cx=e.x,a.g.cy=e.y,a.g.cw=e.width,a.g.ch=e.height);Ea(a.l,b,d);e=0;f=!1;c&&(f=!Ia(c,function(h){return Ja[h]}));f&&g&&k&&(e=100*k/g);a.g.lpiv=e;Ea(a.m,b,e);b=50<=d;d=3==a.l.g?b?"omidMeasurementAboveViewable":"omidMeasurementBelowViewable":b?"omidMeasurementAbove":"omidMeasurementBelow"}return d}function Z(a,b){var c=b.adSessionId,d=b.timestamp,e=b.type,f=b.data;if("audio"!=a.j){switch(e){case "loaded":case "pause":case "bufferStart":case "skipped":case "complete":a.l.j=2;a.m.j=2;break;case "start":case "firstQuartile":case "midpoint":case "thirdQuartile":case "resume":case "bufferFinish":a.l.j=3,a.m.j=3}Y(a,d)}if(f){var g=f.videoPlayerVolume;f=f.deviceVolume;"number"===typeof g&&(a.u.pv=Number(g.toFixed(1)));"number"===typeof f&&(a.u.dv=Number(f.toFixed(1)))}U(a,"audio"!=a.j?"omidVideo":"omidAudio",c,e,d,"Event occurred on creativeType="+a.j,b)}function V(a,b,c){return function(){var d=z.apply(0,arguments);try{b.apply(null,n(d))}catch(e){O(a.o,e,c)}}}function Qa(){var a=H.Goog_Omid_MonitoringParameters;if(a&&"object"===typeof a)return a};var S=void 0,T=void 0;S=void 0===S?"doubleclickbygoogle.com":S;T=void 0===T?"https://pagead2.googlesyndication.com/pagead/gen_204?id=omid_monitoring&":T;(new La).start();}).call(this,this,this.document);
